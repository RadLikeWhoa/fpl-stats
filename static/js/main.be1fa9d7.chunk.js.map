{"version":3,"sources":["serviceWorker.ts","reducers/loading.ts","reducers/bootstrap.ts","components/Player/Player.tsx","components/Widget/Widget.tsx","components/Spinner/Spinner.tsx","utilities/settings.ts","utilities/numbers.ts","utilities/stats.ts","utilities/events.ts","utilities/chips.ts","reducers/settings.ts","components/Button/Button.tsx","hooks/useClickOutside.ts","hooks/useMeanLabel.ts","hooks/useMeanValue.ts","components/Modal/Modal.tsx","reducers/stats.ts","reducers/history.ts","components/HistoryWidget/HistoryWidget.tsx","components/TotsPlayer/TotsPlayer.tsx","components/TotsWidget/TotsWidget.tsx","components/Metric/Metric.tsx","components/SiteLink/SiteLink.tsx","components/PlayerStatsWidget/PlayerStatsWidget.tsx","components/FormationWidget/FormationWidget.tsx","components/CaptainWidget/CaptainWidget.tsx","components/GameweekWidget/GameweekWidget.tsx","components/PositionsWidget/PositionsWidget.tsx","reducers/entry.ts","components/SeasonWidget/SeasonWidget.tsx","components/Team/Team.tsx","components/TeamsWidget/TeamsWidget.tsx","components/NonBlankStreakWidget/NonBlankStreakWidget.tsx","components/SelectionStreakWidget/SelectionStreakWidget.tsx","components/StartStreakWidget/StartStreakWidget.tsx","components/BenchStreakWidget/BenchStreakWidget.tsx","components/SwapIcon/SwapIcon.tsx","components/CaptainOpportunityWidget/CaptainOpportunityWidget.tsx","components/SelectionWidget/SelectionWidget.tsx","components/StarterWidget/StarterWidget.tsx","components/BenchWidget/BenchWidget.tsx","components/DifferenceWidget/DifferenceWidget.tsx","components/OverallRankWidget/OverallRankWidget.tsx","components/PointsWidget/PointsWidget.tsx","components/ValueWidget/ValueWidget.tsx","components/Dashboard/Dashboard.tsx","reducers/index.ts","index.tsx","store.ts"],"names":["Boolean","window","location","hostname","match","loading","createSlice","name","initialState","reducers","startLoading","state","finishLoading","actions","bootstrap","data","undefined","fetchBootstrapStart","fetchBootstrapSuccess","action","payload","Player","props","useSelector","player","elements","find","el","id","team","teams","position","element_types","element_type","className","classNames","condensed","src","code","singular_name_short","alt","web_name","suffix","title","short_name","Widget","settings","children","Spinner","validateTeamId","value","number","Number","isNaN","isInteger","thousandsSeparator","toString","replace","sumNumbers","series","reduce","acc","curr","sort","direction","a","b","round","precision","formatted","toFixed","test","split","getTotalSelections","statData","filter","pick","multiplier","length","getTotalStarts","getTotalBenched","getTotalPoints","points","getTotalBenchPoints","rawPoints","getAllPlayers","stats","Object","values","concat","aggregateStats","players","key","map","getTopStatAggregate","getStreak","comparison","ignoreBlanks","streaks","slice","max","Math","start","indexOf","streak","event","end","getSelectionStreak","gw","getStartStreak","getBenchStreak","getNonBlankStreak","getPastEvents","events","timestamp","Date","now","deadline_time_epoch","getShortName","pop","chips","bboost","freehit","wildcard","localStorage","getItem","meanStrategy","setId","setItem","removeItem","setMeanStrategy","Button","secondary","type","onClick","disabled","label","useClickOutside","callback","element","React","useRef","useEffect","listener","e","target","Node","current","contains","document","addEventListener","removeEventListener","useMeanLabel","strategy","useMeanValue","average","sorted","mid","ceil","median","Modal","useState","setValue","dispatch","useDispatch","close","useCallback","cancel","onClose","ref","onSubmit","preventDefault","placeholder","onChange","buildDataStart","buildDataSuccess","fetchPicks","entry","fetch","encodeURIComponent","response","json","fetchEvent","fetchGameweekInformation","Promise","all","live","history","fetchHistoryStart","fetchHistorySuccess","HistoryWidget","meanLabel","meanValue","pastSeasonsByRank","past","rank","pastSeasonsByPoints","total_points","bestRankedSeason","worstRankedSeason","bestPointSeason","worstPointSeason","top1k","season","top10k","top100k","top1m","season_name","TotsPlayer","TotsWidget","gk","def","fwd","top","rest","xi","bench","explanations","Metric","metric","SiteLink","url","href","rel","PlayerStatsWidget","allPlayers","reds","yellows","goals","assists","cleanSheets","goalsConceded","ownGoals","saves","minutes","penaltiesMissed","penaltiesSaved","inDreamteam","bps","bonus","mostCaptaincies","captaincies","topReturner","topBenchGWReturner","topSeasonReturner","topBenchReturner","red_cards","yellow_cards","goals_scored","clean_sheets","goals_conceded","own_goals","penalties_missed","penalties_saved","in_dreamteam","FormationWidget","weeks","formations","selections","Array","from","keys","index","val","entries","join","formation","count","information","formatFormation","CaptainWidget","captains","captain","sum","GameweekWidget","differences","week","average_entry_score","sortedRanks","gws","bestGW","worstGW","diff","PositionsWidget","positions","elementType","totalPoints","plural_name","fetchEntryStart","fetchEntrySuccess","SeasonWidget","stat","totalTransfers","event_transfers","totalHits","event_transfers_cost","totalBenched","points_on_bench","tc","findIndex","bbWeek","bbPoints","Team","TeamsWidget","counts","plural_name_short","NonBlankStreakWidget","streakers","aStreak","bStreak","aStreakLength","bStreakLength","streaker","SelectionStreakWidget","StartStreakWidget","BenchStreakWidget","SwapIcon","width","height","viewBox","fill","fillRule","d","transform","CaptainOpportunityWidget","improvements","improvement","captainData","topData","StarterWidget","BenchWidget","DifferenceWidget","benched","starts","benchedPercentage","startsPercentage","topStarters","percentageDiff","topBenchwarmers","OverallRankWidget","overall_rank","margin","bottom","left","right","dataKey","fillOpacity","stroke","reversed","tickFormatter","thousandsShorthand","domain","interval","tickCount","angle","textAnchor","strokeDasharray","isAnimationActive","formatter","separator","charAt","toUpperCase","ValueWidget","bank","sortings","selection","alphabet","toLowerCase","charCodeAt","sortOptions","Dashboard","isModalOpen","setIsModalOpen","setSort","isLoading","dashboardRef","query","queryString","parse","hash","setTimeout","scrollTo","scrollWidth","gameweeks","forEach","active_chip","entry_history","picks","item","buildData","fetchHistory","fetchEntry","stringify","summary_overall_points","summary_overall_rank","options","option","styles","container","provided","menu","zIndex","top_element_info","renderPlayerList","SelectionWidget","PointsWidget","combineReducers","ReactDOM","render","StrictMode","store","configureStore","reducer","rootReducer","middleware","getDefaultMiddleware","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.be1fa9d7.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void\n  onUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    )\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister()\n      })\n      .catch(error => {\n        console.error(error.message)\n      })\n  }\n}\n","import { createSlice } from '@reduxjs/toolkit'\n\nconst loading = createSlice({\n    name: 'loading',\n    initialState: 0,\n    reducers: {\n        startLoading(state) {\n            state += 1\n\n            return state\n        },\n        finishLoading(state) {\n            state -= 1\n\n            return state\n        },\n    },\n})\n\nexport const { startLoading, finishLoading } = loading.actions\n\nexport default loading.reducer","import { createSlice, ThunkAction, Action } from '@reduxjs/toolkit'\nimport { Bootstrap } from '../types'\nimport { finishLoading, startLoading } from './loading'\n\nconst bootstrap = createSlice({\n    name: 'bootstrap',\n    initialState: {\n        data: undefined,\n    },\n    reducers: {\n        fetchBootstrapStart(state) {\n            state.data = undefined\n        },\n        fetchBootstrapSuccess(state, action) {\n            state.data = action.payload\n        },\n    },\n})\n\nexport const { fetchBootstrapStart, fetchBootstrapSuccess } = bootstrap.actions\n\nexport const fetchBootstrap = (): ThunkAction<void, Bootstrap, unknown, Action<string>> => async dispatch => {\n    dispatch(fetchBootstrapStart())\n    dispatch(startLoading())\n\n    const response = await fetch(`https://jsonp.afeld.me/?url=${encodeURIComponent('https://fantasy.premierleague.com/api/bootstrap-static/')}`)\n\n    const data = await response.json()\n\n    dispatch(fetchBootstrapSuccess(data))\n    dispatch(finishLoading())\n}\n\nexport default bootstrap.reducer","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport classNames from 'classnames'\nimport { RootState } from '../../reducers'\nimport './Player.scss'\n\ntype Props = {\n    id: number\n    condensed?: boolean\n    suffix?: string | (() => JSX.Element)\n}\n\nconst Player: React.FC<Props> = (props: Props) => {\n    const bootstrap = useSelector((state: RootState) => state.bootstrap.data)\n\n    const player = bootstrap?.elements.find(el => el.id === props.id)\n    const team = bootstrap?.teams.find(el => el.id === player?.team)\n    const position = bootstrap?.element_types.find(el => el.id === player?.element_type)\n\n    return (\n        <div className={classNames('player', { 'player--condensed': props.condensed })}>\n            <img\n                src={`https://fantasy.premierleague.com/dist/img/shirts/special/shirt_${team?.code}${position?.singular_name_short === 'GKP' ? '_1' : ''}-66.png`}\n                alt={player?.web_name}\n                className=\"player__shirt\"\n            />\n            <div className=\"player__detail\">\n                <div className=\"player__name\">\n                    <span>{player?.web_name}{typeof props.suffix === 'string' ? ` (${props.suffix})` : props.suffix ? props.suffix() : null}</span>\n                </div>\n                <div className=\"player__info\">\n                    <span className=\"player__team\" title={team?.name}>{team?.short_name}</span>\n                    <span className=\"player__position\">{position?.singular_name_short}</span>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Player","import React from 'react'\nimport classNames from 'classnames'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport './Widget.scss'\n\ntype Props = {\n    title?: string\n    children?: React.ReactNode\n}\n\nconst Widget: React.FC<Props> = (props: Props) => {\n    const id = useSelector((state: RootState) => state.settings.id)\n\n    return (\n        <div className={classNames('widget', {\n            'widget--cloaked': !id,\n        })}>\n            {props.title && (\n                <h2 className=\"widget__title\">{props.title}</h2>\n            )}\n            <div className=\"widget__content\">\n                {props.children}\n            </div>\n        </div>\n    )\n}\n\nexport default Widget","import React from 'react'\nimport './Spinner.scss'\n\nconst Spinner: React.FC = () => (\n    <div className=\"spinner\">\n        <div className=\"spinner__item\"></div>\n        <div className=\"spinner__item\"></div>\n        <div className=\"spinner__item\"></div>\n        <div className=\"spinner__item\"></div>\n        <div className=\"spinner__item\"></div>\n        <div className=\"spinner__item\"></div>\n        <div className=\"spinner__item\"></div>\n        <div className=\"spinner__item\"></div>\n        <div className=\"spinner__item\"></div>\n    </div>\n)\n\nexport default Spinner","export const validateTeamId = (value: string) => {\n    const number = Number(value)\n    return value && !Number.isNaN(number) && Number.isInteger(number)\n}","export const thousandsSeparator = (value: number): string => {\n    return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n}\n\nexport const thousandsShorthand = (value: number): string => {\n    return value > 999999 ? `${round(value / 1000000)}M` : value > 999 ? `${round(value / 1000, 0)}K` : `${value}`\n}\n\nexport const sumNumbers = (series: number[]): number => {\n    return series.reduce((acc, curr) => acc + curr, 0)\n}\n\nexport const average = (series: number[]): number => {\n    return sumNumbers(series) / series.length\n}\n\nexport const median = (series: number[]): number => {\n    const sorted = sort(series)\n    const mid = Math.ceil(series.length / 2)\n\n    if (sorted.length % 2 === 0) {\n        return (sorted[mid] + sorted[mid + 1]) / 2\n    }\n\n    return sorted[mid - 1]\n}\n\nexport const sort = (series: number[], direction: 'asc' | 'desc' = 'desc'): number[] => {\n    if (direction === 'asc') {\n        return [ ...series ].sort((a, b) => a - b)\n    }\n\n    return [ ...series ].sort((a, b) => b - a)\n}\n\nexport const round = (value: number, precision: number = 1): string => {\n    const formatted = value.toFixed(precision)\n\n    if (/\\.0+$/.test(formatted)) {\n        return formatted.split('.')[0]\n    }\n\n    return formatted\n}","import { ElementStats, Event, StatData, Stats, StatDataGameweek } from '../types'\nimport { sumNumbers } from './numbers'\n\ntype Streak = {\n    start: Event\n    end: Event\n    length: number\n    points?: number\n}\n\nexport const getTotalSelections = (statData: StatData): number => {\n    return statData.data.filter(pick => pick.multiplier !== null).length\n}\n\nexport const getTotalStarts = (statData: StatData): number => {\n    return statData.data.filter(pick => pick.multiplier && pick.multiplier > 0).length\n}\n\nexport const getTotalBenched = (statData: StatData): number => {\n    return statData.data.filter(pick => pick.multiplier === 0).length\n}\n\nexport const getTotalPoints = (statData: StatData): number => {\n    return statData.data.reduce((acc, pick) => acc + (pick.points || 0), 0)\n}\n\nexport const getTotalBenchPoints = (statData: StatData): number => {\n    return statData.data.reduce((acc, pick) => acc + (pick.multiplier === 0 ? (pick.rawPoints || 0) : 0), 0)\n}\n\nexport const getAllPlayers = (stats: Stats): StatData[] => {\n    return Object.values(stats).reduce((acc, curr) => acc.concat(curr), [])\n}\n\nexport const aggregateStats = (players: StatData[], key: keyof ElementStats) => players.map(player => ({\n    player,\n    [key]: player.data.reduce((acc, data) => {\n        if (typeof data.stats?.[key] === 'number') {\n            return ((data.stats?.[key] as number) || 0) + acc\n        }\n\n        if (typeof data.stats?.[key] === 'boolean') {\n            return (+(data.stats?.[key] as boolean) || 0) + acc\n        }\n\n        return acc\n    }, 0)\n})).sort((a, b) => (b[key] as number) - (a[key] as number))\n\nexport const getTopStatAggregate = (players: StatData[], key: keyof ElementStats) => aggregateStats(players, key)[0]\n\nconst getStreak = (statData: StatData, comparison: (gw: StatDataGameweek) => boolean, ignoreBlanks: boolean = false): Streak | null => {\n    const streaks = statData.data.reduce((acc, curr) => {\n        if (comparison(curr)) {\n            if (ignoreBlanks) {\n                return [ ...acc.slice(0, acc.length - 1), acc[acc.length - 1] + 1 ]\n            }\n\n            if (!acc.length || acc[acc.length - 1] === 0) {\n                return [ ...acc, 1 ]\n            }\n\n            return [ ...acc.slice(0, acc.length - 1), acc[acc.length - 1] + 1 ]\n        }\n\n        return [ ...acc, 0 ]\n    }, (ignoreBlanks ? [ 0 ] : []) as number[])\n\n    const max = Math.max(...streaks)\n\n    if (max === 0) {\n        return null\n    }\n\n    const start = statData.data[sumNumbers(streaks.slice(0, streaks.indexOf(max)).map(streak => streak > 0 ? streak : 1))].event\n    const end = statData.data[start.id - 2 + max].event\n\n    const points = sumNumbers(statData.data\n        .slice(start.id - 1, start.id - 1 + max)\n        .map(event => event.points || 0))\n\n    return {\n        start,\n        end,\n        length: max,\n        points,\n    }\n}\n\nexport const getSelectionStreak = (statData: StatData): Streak | null => getStreak(statData, (gw) => gw.multiplier !== null, true)\n\nexport const getStartStreak = (statData: StatData): Streak | null => getStreak(statData, (gw) => (gw.multiplier || 0) > 0, true)\n\nexport const getBenchStreak = (statData: StatData): Streak | null => getStreak(statData, (gw) => gw.multiplier === 0, true)\n\nexport const getNonBlankStreak = (statData: StatData): Streak | null => getStreak(statData, (gw) => (gw.rawPoints || 0) > 2)","import { Event } from '../types'\n\nexport const getPastEvents = (events: Event[]): Event[] => {\n    const timestamp = Date.now()\n    return events.filter(event => event.deadline_time_epoch * 1000 < timestamp)\n}\n\nexport const getShortName = (event: Event): string => {\n    return event.name.split(' ').pop() || ''\n}","const chips: { [key: string]: string } = {\n    '3xc': 'TC',\n    bboost: 'BB',\n    freehit: 'FH',\n    wildcard: 'WC',\n}\n\nexport const getChipAbbreviation = (key: string): string | null => chips[key] || null","import { createSlice } from '@reduxjs/toolkit'\n\nconst settings = createSlice({\n    name: 'settings',\n    initialState: {\n        id: localStorage.getItem('id') || undefined,\n        meanStrategy: localStorage.getItem('meanStrategy') || 'average',\n    },\n    reducers: {\n        setId(state, action) {\n            state.id = action.payload\n\n            if (state.id) {\n                localStorage.setItem('id', state.id)\n            } else {\n                localStorage.removeItem('id')\n            }\n        },\n        setMeanStrategy(state, action) {\n            state.meanStrategy = action.payload\n            localStorage.setItem('meanStrategy', state.meanStrategy)\n        }\n    },\n})\n\nexport const { setId, setMeanStrategy } = settings.actions\n\nexport default settings.reducer","import React from 'react'\nimport classNames from 'classnames'\nimport './Button.scss'\n\ntype Props = {\n    label: string\n    type?: 'reset' | 'submit' | 'button'\n    disabled?: boolean\n    secondary?: boolean\n    onClick?: () => void\n}\n\nconst Button: React.FC<Props> = (props: Props) => (\n    <button\n        className={classNames('button', { 'button--secondary': props.secondary })}\n        type={props.type || 'button'}\n        onClick={props.onClick}\n        disabled={props.disabled}\n    >\n        {props.label}\n    </button>\n)\n\nexport default Button","import React from 'react'\n\nconst useClickOutside = <T extends HTMLElement>(callback: () => void): React.RefObject<T> => {\n  const element = React.useRef<T>(null)\n\n  React.useEffect(() => {\n    const listener = (e: MouseEvent): void => {\n      if (e.target instanceof Node && element.current && !element.current.contains(e.target)) {\n        callback()\n      }\n    }\n\n    if (element.current) {\n      document.addEventListener('click', listener)\n    } else {\n      document.removeEventListener('click', listener)\n    }\n\n    return () => document.removeEventListener('click', listener)\n  }, [element, callback])\n\n  return element\n}\n\nexport default useClickOutside\n","import { useSelector } from 'react-redux'\nimport { RootState } from '../reducers'\n\nconst useMeanLabel: () => (suffix: string) => string = () => {\n    const strategy = useSelector((state: RootState) => state.settings.meanStrategy)\n\n    return (suffix: string) => `${strategy === 'average' ? 'Average' : 'Median'} ${suffix}`\n}\n\nexport default useMeanLabel","import { useSelector } from 'react-redux'\nimport { RootState } from '../reducers'\nimport { average, median } from '../utilities'\n\nconst useMeanValue: () => (series: number[]) => number = () => {\n    const strategy = useSelector((state: RootState) => state.settings.meanStrategy)\n\n    return (series: number[]) => {\n        if (strategy === 'average') {\n            return average(series)\n        }\n\n        return median(series)\n    }\n}\n\nexport default useMeanValue","import React, { useState, useEffect, useCallback } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { setId } from '../../reducers/settings'\nimport { Button } from '../Button'\nimport { useClickOutside } from '../../hooks'\nimport { validateTeamId } from '../../utilities'\nimport { RootState } from '../../reducers'\nimport './Modal.scss'\n\ntype Props = {\n    onClose?: () => void\n}\n\nconst Modal: React.FC<Props> = (props: Props) => {\n    const [ value, setValue ] = useState<string>('')\n\n    const id = useSelector((state: RootState) => state.settings.id)\n\n    const dispatch = useDispatch()\n\n    const close = useCallback((cancel: boolean) => {\n        if (!cancel) {\n            dispatch(setId(Number(value)))\n        } else if (!id) {\n            return\n        }\n\n        if (props.onClose) {\n            props.onClose()\n        }\n    }, [ dispatch, props, value, id ])\n\n    const ref = useClickOutside<HTMLDivElement>(() => close(true))\n\n    useEffect(() => {\n        const listener = (e: KeyboardEvent) => {\n            if (e.key === 'Escape') {\n                close(true)\n            }\n        }\n\n        document.addEventListener('keyup', listener)\n\n        return () => document.removeEventListener('keyup', listener)\n    }, [ close ])\n\n    return (\n        <form onSubmit={e => { close(false); e.preventDefault() }}>\n            <div className=\"modal\">\n                <div className=\"modal__element\" ref={ref}>\n                    <header className=\"modal__header\">\n                        Enter Your Team ID\n                    </header>\n                    <div className=\"modal__body\">\n                        <input\n                            className=\"modal__input\"\n                            type=\"text\"\n                            placeholder=\"e.g. 4654486\"\n                            value={value}\n                            onChange={e => setValue(e.target.value)}\n                        />\n                    </div>\n                    <footer className=\"modal__footer\">\n                        <Button\n                            label=\"Show Stats\"\n                            type=\"submit\"\n                            disabled={!validateTeamId(value)}\n                        />\n                    </footer>\n                </div>\n            </div>\n        </form>\n    )\n}\n\nexport default Modal\n","import { createSlice, ThunkAction, Action } from '@reduxjs/toolkit'\nimport { Bootstrap, Picks, Stats, StatData, LiveEvent } from '../types'\nimport { getPastEvents } from '../utilities'\nimport { finishLoading, startLoading } from './loading'\n\nconst stats = createSlice({\n    name: 'stats',\n    initialState: {\n        data: undefined,\n        chips: undefined,\n    },\n    reducers: {\n        buildDataStart(state) {\n            state.data = undefined\n            state.chips = undefined\n        },\n        buildDataSuccess(state, action) {\n            state.data = action.payload.data\n            state.chips = action.payload.chips\n        },\n    },\n})\n\nexport const { buildDataStart, buildDataSuccess } = stats.actions\n\nconst fetchPicks = async (event: number, entry: number): Promise<Picks> => {\n    const response = await fetch(`https://jsonp.afeld.me/?url=${encodeURIComponent(`https://fantasy.premierleague.com/api/entry/${entry}/event/${event}/picks/`)}`)\n    return await response.json()\n}\n\nconst fetchEvent = async (event: number): Promise<LiveEvent> => {\n    const response = await fetch(`https://jsonp.afeld.me/?url=${encodeURIComponent(`https://fantasy.premierleague.com/api/event/${event}/live/`)}`)\n    return await response.json()\n}\n\nconst fetchGameweekInformation = async (event: number, entry: number): Promise<{ pick: Picks, live: LiveEvent }> => {\n    const [ pick, live ] = await Promise.all([\n        fetchPicks(event, entry),\n        fetchEvent(event),\n    ])\n\n    return {\n        pick,\n        live,\n    }\n}\n\nexport const buildData = (bootstrap: Bootstrap, entry: number): ThunkAction<void, Bootstrap, unknown, Action<string>> => async dispatch => {\n    dispatch(buildDataStart())\n    dispatch(startLoading())\n\n    const gameweeks = await Promise.all(\n        getPastEvents(bootstrap.events).map(async event => await fetchGameweekInformation(event.id, entry))\n    )\n\n    const stats: { [key: number]: StatData } = {}\n    const chips: { [key: number]: string } = {}\n\n    gameweeks.forEach(gw => {\n        if (gw.pick.active_chip) {\n            chips[gw.pick.entry_history.event] = gw.pick.active_chip\n        }\n\n        gw.pick.picks.forEach(item => {\n            if (!stats[item.element]) {\n                stats[item.element] = {\n                    element: bootstrap.elements.find(el => el.id === item.element)!,\n                    data: bootstrap.events.filter(event => event.id < gw.pick.entry_history.event).map(event => ({\n                        event,\n                        multiplier: null,\n                        points: null,\n                        rawPoints: null,\n                        stats: null,\n                        position: null,\n                    })),\n                }\n            }\n\n            const points = gw.live.elements.find(el => el.id === item.element)?.stats.total_points || null\n\n            stats[item.element] = {\n                ...stats[item.element],\n                data: [\n                    ...stats[item.element].data,\n                    {\n                        event: bootstrap.events.find(event => event.id === gw.pick.entry_history.event)!,\n                        multiplier: item.multiplier,\n                        points: points !== null ? points * item.multiplier : points,\n                        rawPoints: points,\n                        stats: gw.live.elements.find(el => el.id === item.element)?.stats || null,\n                        position: item.position,\n                    }\n                ]\n            }\n        })\n\n        Object.keys(stats).forEach(player => {\n            const index = Number(player)\n\n            if (stats[index].data.length < gw.pick.entry_history.event) {\n                stats[index] = {\n                    ...stats[index],\n                    data: [\n                        ...stats[index].data,\n                        {\n                            event: bootstrap.events.find(event => event.id === gw.pick.entry_history.event)!,\n                            multiplier: null,\n                            points: null,\n                            rawPoints: null,\n                            stats: null,\n                            position: null,\n                        },\n                    ],\n                }\n            }\n        })\n    })\n\n    dispatch(buildDataSuccess({\n        data: Object.values(stats).reduce((acc: Stats, curr) => ({\n            ...acc,\n            [curr.element.element_type]: [\n                ...(acc[curr.element.element_type] || []),\n                curr,\n            ],\n        }), {}),\n        chips,\n    }))\n    dispatch(finishLoading())\n}\n\nexport default stats.reducer","import { createSlice, ThunkAction, Action } from '@reduxjs/toolkit'\nimport { History } from '../types'\nimport { finishLoading, startLoading } from './loading'\n\nconst history = createSlice({\n    name: 'history',\n    initialState: {\n        data: undefined,\n    },\n    reducers: {\n        fetchHistoryStart(state) {\n            state.data = undefined\n        },\n        fetchHistorySuccess(state, action) {\n            state.data = action.payload\n        },\n    },\n})\n\nexport const { fetchHistoryStart, fetchHistorySuccess } = history.actions\n\nexport const fetchHistory = (entry: number): ThunkAction<void, History, unknown, Action<string>> => async dispatch => {\n    dispatch(fetchHistoryStart())\n    dispatch(startLoading())\n\n    const response = await fetch(`https://jsonp.afeld.me/?url=${encodeURIComponent(`https://fantasy.premierleague.com/api/entry/${entry}/history/`)}`)\n\n    const data = await response.json()\n\n    dispatch(fetchHistorySuccess(data))\n    dispatch(finishLoading())\n}\n\nexport default history.reducer","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { thousandsSeparator } from '../../utilities'\nimport { Widget } from '../Widget'\nimport { useMeanValue, useMeanLabel } from '../../hooks'\n\nconst HistoryWidget: React.FC = () => {\n    const history = useSelector((state: RootState) => state.history.data)\n\n    const meanLabel = useMeanLabel()\n    const meanValue = useMeanValue()\n\n    if (!history) {\n        return (\n            <Widget title=\"Historical Data\" />\n        )\n    }\n\n    const pastSeasonsByRank = [ ...history.past ].sort((a, b) => a.rank - b.rank)\n    const pastSeasonsByPoints = [ ...history.past ].sort((a, b) => b.total_points - a.total_points)\n\n    const bestRankedSeason = pastSeasonsByRank[0]\n    const worstRankedSeason = pastSeasonsByRank[pastSeasonsByRank.length - 1]\n\n    const bestPointSeason = pastSeasonsByPoints[0]\n    const worstPointSeason = pastSeasonsByPoints[pastSeasonsByPoints.length - 1]\n\n    const top1k = pastSeasonsByRank.filter(season => season.rank <= 1000).length\n    const top10k = pastSeasonsByRank.filter(season => season.rank <= 10000).length\n    const top100k = pastSeasonsByRank.filter(season => season.rank <= 100000).length\n    const top1m = pastSeasonsByRank.filter(season => season.rank <= 1000000).length\n\n    return (\n        <Widget title=\"Historical Data\">\n            <ul className=\"widget__list\">\n                <li className=\"widget__list__item\">\n                    <span>Best Season Rank</span>\n                    <span>{thousandsSeparator(bestRankedSeason.rank)} ({bestRankedSeason.season_name})</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Best Points Finish</span>\n                    <span>{thousandsSeparator(bestPointSeason.total_points)} ({bestPointSeason.season_name})</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Worst Season Rank</span>\n                    <span>{thousandsSeparator(worstRankedSeason.rank)} ({worstRankedSeason.season_name})</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Worst Points Finish</span>\n                    <span>{thousandsSeparator(worstPointSeason.total_points)} ({worstPointSeason.season_name})</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>{meanLabel('Rank')}</span>\n                    <span>{thousandsSeparator(Math.round(meanValue(pastSeasonsByRank.map((season) => season.rank))))}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>{meanLabel('Points')}</span>\n                    <span>{thousandsSeparator(Math.round(meanValue(pastSeasonsByPoints.map((season) => season.total_points))))}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Top 1K Finishes</span>\n                    <span>{top1k}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Top 10K Finishes</span>\n                    <span>{top10k}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Top 100K Finishes</span>\n                    <span>{top100k}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Top 1M Finishes</span>\n                    <span>{top1m}</span>\n                </li>\n            </ul>\n        </Widget>\n    )\n}\n\nexport default HistoryWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport './TotsPlayer.scss'\n\ntype Props = {\n    id: number\n    points: number\n}\n\nconst TotsPlayer: React.FC<Props> = (props: Props) => {\n    const bootstrap = useSelector((state: RootState) => state.bootstrap.data)\n\n    const player = bootstrap?.elements.find(el => el.id === props.id)\n    const team = bootstrap?.teams.find(el => el.id === player?.team)\n    const position = bootstrap?.element_types.find(el => el.id === player?.element_type)\n\n    return (\n        <div className=\"tots-player\">\n            <img\n                src={`https://fantasy.premierleague.com/dist/img/shirts/special/shirt_${team?.code}${position?.singular_name_short === 'GKP' ? '_1' : ''}-66.png`}\n                alt={player?.web_name}\n                className=\"tots-player__shirt\"\n            />\n            <div className=\"tots-player__detail\">\n                <div className=\"tots-player__name\">\n                    <span>{player?.web_name}</span>\n                </div>\n                <div className=\"tots-player__points\">\n                    {props.points}\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default TotsPlayer","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { getTotalPoints } from '../../utilities'\nimport { TotsPlayer } from '../TotsPlayer'\nimport { Widget } from '../Widget'\nimport './TotsWidget.scss'\n\nconst MIN_GK = 1\nconst MAX_GK = 2\n\nconst MIN_DEF = 3\nconst MAX_DEF = 5\n\nconst MIN_MID = 2\nconst MAX_MID = 5\n\nconst MIN_FWD = 1\nconst MAX_FWD = 3\n\nconst TotsWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n\n    if (!stats) {\n        return (\n            <Widget title=\"Team of the Season\" />\n        )\n    }\n\n    const gk = [ ...stats[1] ].sort((a, b) => getTotalPoints(b) - getTotalPoints(a)).slice(0, MAX_GK)\n    const def = [ ...stats[2] ].sort((a, b) => getTotalPoints(b) - getTotalPoints(a)).slice(0, MAX_DEF)\n    const mid = [ ...stats[3] ].sort((a, b) => getTotalPoints(b) - getTotalPoints(a)).slice(0, MAX_MID)\n    const fwd = [ ...stats[4] ].sort((a, b) => getTotalPoints(b) - getTotalPoints(a)).slice(0, MAX_FWD)\n\n    const top = [ ...gk.slice(0, MIN_GK), ...def.slice(0, MIN_DEF), ...mid.slice(0, MIN_MID), ...fwd.slice(0, MIN_FWD) ]\n    const rest = [ ...def.slice(MIN_DEF), ...mid.slice(MIN_MID), ...fwd.slice(MIN_FWD) ].sort((a, b) => getTotalPoints(b) - getTotalPoints(a))\n\n    const xi = [ ...top, ...rest.slice(0, 4) ].sort((a, b) => a.element.element_type - b.element.element_type)\n    const bench = [ ...gk.slice(MIN_GK), ...rest.slice(4) ].sort((a, b) => a.element.element_type - b.element.element_type)\n\n    return (\n        <Widget title=\"Team of the Season\">\n            <div className=\"tots\">\n                <div className=\"tots__row\">\n                    {xi.filter(el => el.element.element_type === 1).map(player => (\n                        <TotsPlayer\n                            key={player.element.id}\n                            id={player.element.id}\n                            points={getTotalPoints(player)}\n                        />\n                    ))}\n                </div>\n                <div className=\"tots__row\">\n                    {xi.filter(el => el.element.element_type === 2).map(player => (\n                        <TotsPlayer\n                            key={player.element.id}\n                            id={player.element.id}\n                            points={getTotalPoints(player)}\n                        />\n                    ))}\n                </div>\n                <div className=\"tots__row\">\n                    {xi.filter(el => el.element.element_type === 3).map(player => (\n                        <TotsPlayer\n                            key={player.element.id}\n                            id={player.element.id}\n                            points={getTotalPoints(player)}\n                        />\n                    ))}\n                </div>\n                <div className=\"tots__row\">\n                    {xi.filter(el => el.element.element_type === 4).map(player => (\n                        <TotsPlayer\n                            key={player.element.id}\n                            id={player.element.id}\n                            points={getTotalPoints(player)}\n                        />\n                    ))}\n                </div>\n                <div className=\"tots__row tots__row--bench\">\n                    {bench.map(player => (\n                        <TotsPlayer\n                            key={player.element.id}\n                            id={player.element.id}\n                            points={getTotalPoints(player)}\n                        />\n                    ))}\n                </div>\n            </div>\n        </Widget>\n    )\n}\n\nexport default TotsWidget","import React from 'react'\nimport './Metric.scss'\n\nconst explanations = {\n    'ppg': 'Points per Game',\n    'ppp': 'Points per Player',\n}\n\ntype Props = {\n    metric: 'ppg' | 'ppp'\n}\n\nconst Metric: React.FC<Props> = (props: Props) => {\n    return (\n        <abbr className=\"metric\" title={explanations[props.metric]}>{props.metric}</abbr>\n    )\n}\n\nexport default Metric","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\n\ntype Props = {\n    label?: string\n    event?: number\n    target?: 'transfers'\n}\n\nconst SiteLink: React.FC<Props> = (props: Props) => {\n    const id = useSelector((state: RootState) => state.settings.id)\n\n    const baseUrl = `https://fantasy.premierleague.com/entry/${id}/`\n    let url = baseUrl\n\n    if (props.event) {\n        url = `${url}event/${props.event}/`\n    } else if (props.target) {\n        url = `${url}${props.target}/`\n    }\n\n    return (\n        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n            {props.event ? `GW ${props.event}` : props.label ? props.label : url}\n        </a>\n    )\n}\n\nexport default SiteLink","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { getAllPlayers, getTopStatAggregate, getTotalBenchPoints, getTotalPoints, getTotalStarts, thousandsSeparator, round } from '../../utilities'\nimport { Metric } from '../Metric'\nimport { Player } from '../Player'\nimport { SiteLink } from '../SiteLink'\nimport { Widget } from '../Widget'\n\nconst PlayerStatsWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n    const history = useSelector((state: RootState) => state.history.data)\n\n    if (!history || !stats) {\n        return (\n            <Widget title=\"Player Stats\" />\n        )\n    }\n\n    const allPlayers = getAllPlayers(stats)\n\n    const reds = getTopStatAggregate(allPlayers, 'red_cards')\n    const yellows = getTopStatAggregate(allPlayers, 'yellow_cards')\n    const goals = getTopStatAggregate(allPlayers, 'goals_scored')\n    const assists = getTopStatAggregate(allPlayers, 'assists')\n    const cleanSheets = getTopStatAggregate(allPlayers, 'clean_sheets')\n    const goalsConceded = getTopStatAggregate(allPlayers, 'goals_conceded')\n    const ownGoals = getTopStatAggregate(allPlayers, 'own_goals')\n    const saves = getTopStatAggregate(allPlayers, 'saves')\n    const minutes = getTopStatAggregate(allPlayers, 'minutes')\n    const penaltiesMissed = getTopStatAggregate(allPlayers, 'penalties_missed')\n    const penaltiesSaved = getTopStatAggregate(allPlayers, 'penalties_saved')\n    const inDreamteam = getTopStatAggregate(allPlayers, 'in_dreamteam')\n    const bps = getTopStatAggregate(allPlayers, 'bps')\n    const bonus = getTopStatAggregate(allPlayers, 'bonus')\n\n    const mostCaptaincies = allPlayers.map(player => ({\n        player,\n        captaincies: player.data.filter(data => data.multiplier && data.multiplier > 1).length,\n    })).sort((a, b) => b.captaincies - a.captaincies)[0]\n\n    const topReturner = allPlayers\n        .map(player => ({\n            ...player,\n            data: [ ...player.data ].sort((a, b) => (b.points || 0) - (a.points || 0)),\n        }))\n        .sort((a, b) => (b.data[0].points || 0) - (a.data[0].points || 0))[0]\n\n    const topBenchGWReturner = allPlayers\n        .map(player => ({\n            ...player,\n            data: [ ...player.data ].filter(data => data.multiplier === 0).sort((a, b) => (b.rawPoints || 0) - (a.rawPoints || 0)),\n        }))\n        .filter(player => player.data.length)\n        .sort((a, b) => (b.data[0].rawPoints || 0) - (a.data[0].rawPoints || 0))[0]\n\n    const topSeasonReturner = allPlayers.sort((a, b) => getTotalPoints(b) - getTotalPoints(a))[0]\n    const topBenchReturner = allPlayers.sort((a, b) => getTotalBenchPoints(b) - getTotalBenchPoints(a))[0]\n\n    return (\n        <Widget title=\"Player Stats\">\n            <ul className=\"widget__list\">\n                <li className=\"widget__list__item\">\n                    <span>Top GW Returner</span>\n                    <span>\n                        <Player\n                            id={topReturner.element.id}\n                            suffix={() => (\n                                <>\n                                    {' '}\n                                    (\n                                        {topReturner.data[0].points} pts,\n                                        {' '}\n                                        <SiteLink event={topReturner.data[0].event.id} />\n                                    )\n                                </>\n                            )}\n                            condensed\n                        />\n                    </span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Top Season Returner</span>\n                    <span>\n                        <Player\n                            id={topSeasonReturner.element.id}\n                            suffix={() => (\n                                <>\n                                    {' '}\n                                    (\n                                        {getTotalPoints(topSeasonReturner)} pts,\n                                        {' '}\n                                        {round(getTotalPoints(topSeasonReturner) / getTotalStarts(topSeasonReturner))}\n                                        {' '}\n                                        <Metric metric=\"ppg\" />\n                                    )\n                                </>\n                            )}\n                            condensed\n                        />\n                    </span>\n                </li>\n                {topBenchGWReturner.data[0].multiplier === 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Top GW Bench Returner</span>\n                        <span>\n                            <Player\n                                id={topBenchGWReturner.element.id}\n                                suffix={() => (\n                                    <>\n                                        {' '}\n                                        (\n                                            {topBenchGWReturner.data[0].rawPoints} pts,\n                                            {' '}\n                                            <SiteLink event={topBenchGWReturner.data[0].event.id} />\n                                        )\n                                    </>\n                                )}\n                                condensed\n                            />\n                        </span>\n                    </li>\n                )}\n                <li className=\"widget__list__item\">\n                    <span>Most Points While Benched</span>\n                    <Player\n                        id={topBenchReturner.element.id}\n                        suffix={() => (\n                            <>\n                                {' '}\n                                (\n                                    {getTotalBenchPoints(topBenchReturner)} pts,\n                                    {' '}\n                                    {round(getTotalBenchPoints(topBenchReturner) / topBenchReturner.data.filter(data => data.multiplier === 0).length)}\n                                    {' '}\n                                    <Metric metric=\"ppg\" />\n                                )\n                            </>\n                        )}\n                        condensed\n                    />\n                </li>\n                {reds.red_cards > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Most Red Cards</span>\n                        <Player id={reds.player.element.id} suffix={`${reds.red_cards}`} condensed />\n                    </li>\n                )}\n                {yellows.yellow_cards > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Most Yellow Cards</span>\n                        <Player id={yellows.player.element.id} suffix={`${yellows.yellow_cards}`} condensed />\n                    </li>\n                )}\n                {goals.goals_scored > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Top Scorer</span>\n                        <Player id={goals.player.element.id} suffix={`${goals.goals_scored}`} condensed />\n                    </li>\n                )}\n                {assists.assists > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Most Assists</span>\n                        <Player id={assists.player.element.id} suffix={`${assists.assists}`} condensed />\n                    </li>\n                )}\n                {bonus.bonus > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Most Bonus Points</span>\n                        <Player id={bonus.player.element.id} suffix={`${bonus.bonus}`} condensed />\n                    </li>\n                )}\n                {bps.bps > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Highest Total BPS</span>\n                        <Player id={bps.player.element.id} suffix={`${bps.bps}`} condensed />\n                    </li>\n                )}\n                {cleanSheets.clean_sheets > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Most Clean Sheets</span>\n                        <Player id={cleanSheets.player.element.id} suffix={`${cleanSheets.clean_sheets}`} condensed />\n                    </li>\n                )}\n                {goalsConceded.goals_conceded > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Most Goals Conceded</span>\n                        <Player id={goalsConceded.player.element.id} suffix={`${goalsConceded.goals_conceded}`} condensed />\n                    </li>\n                )}\n                {saves.saves > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Most Saves</span>\n                        <Player id={saves.player.element.id} suffix={`${saves.saves}`} condensed />\n                    </li>\n                )}\n                {ownGoals.own_goals > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Most Own Goals</span>\n                        <Player id={ownGoals.player.element.id} suffix={`${ownGoals.own_goals}`} condensed />\n                    </li>\n                )}\n                {penaltiesMissed.penalties_missed > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Most Penalties Missed</span>\n                        <Player id={penaltiesMissed.player.element.id} suffix={`${penaltiesMissed.penalties_missed}`} condensed />\n                    </li>\n                )}\n                {penaltiesSaved.penalties_saved > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Most Penalties Saved</span>\n                        <Player id={penaltiesSaved.player.element.id} suffix={`${penaltiesSaved.penalties_saved}`} condensed />\n                    </li>\n                )}\n                {minutes.minutes > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Most Minutes</span>\n                        <Player id={minutes.player.element.id} suffix={`${thousandsSeparator(minutes.minutes as number)}`} condensed />\n                    </li>\n                )}\n                {inDreamteam.in_dreamteam > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Most Times in Dreamteam</span>\n                        <Player id={inDreamteam.player.element.id} suffix={`${inDreamteam.in_dreamteam}`} condensed />\n                    </li>\n                )}\n                {mostCaptaincies.captaincies > 0 && (\n                    <li className=\"widget__list__item\">\n                        <span>Most Captaincies</span>\n                        <Player id={mostCaptaincies.player.element.id} suffix={`${mostCaptaincies.captaincies}`} condensed />\n                    </li>\n                )}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default PlayerStatsWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { Widget } from '../Widget'\nimport { thousandsSeparator, sumNumbers, round } from '../../utilities'\nimport { Metric } from '../Metric'\n\ntype FormationInformation = {\n    count: number\n    points: number\n}\n\nconst formatFormation = (formation: string) => sumNumbers(formation.split('-').map(position => Number(position))) > 10 ? 'Bench Boost' : formation\n\nconst FormationWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n\n    const history = useSelector((state: RootState) => state.history.data)\n\n    if (!stats || !history) {\n        return (\n            <Widget title=\"Formations\" />\n        )\n    }\n\n    const weeks = history.current.length\n\n    const formations = Object\n        .values(stats)\n        .map(position => {\n            const selections = position.map(player => player.data.map(data => data.multiplier))\n\n            return Array.from(Array(weeks).keys()).map((el, index) => selections\n                .map(player => (player[index] || 0) > 0)\n                .filter(val => !!val)\n                .length\n            )\n        })\n        .slice(1)\n\n    const data = Array\n        .from(Array(weeks).keys())\n        .map((el, index) => formations\n            .map(entries => entries[index])\n            .join('-')\n        )\n        .reduce((acc, formation, index) => {\n            if (acc[formation]) {\n                return {\n                    ...acc,\n                    [formation]: {\n                        count: acc[formation].count + 1,\n                        points: acc[formation].points + history.current[index].points,\n                    }\n                }\n            }\n\n            return {\n                ...acc,\n                [formation]: {\n                    count: 1,\n                    points: history.current[index].points,\n                }\n            }\n        }, {} as Record<string, FormationInformation>)\n\n    return (\n        <Widget title=\"Formations\">\n            <ul className=\"widget__list\">\n                {Object.entries(data).sort((a, b) => b[1].count - a[1].count).map(([ formation, information ]) => {\n                    return (\n                        <li className=\"widget__list__item\" key={formation}>\n                            <span>{formatFormation(formation)}</span>\n                            <span>{information.count} ({thousandsSeparator(information.points)} pts, {round(information.points / information.count)} <Metric metric=\"ppg\" />)</span>\n                        </li>\n                    )\n                })}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default FormationWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { thousandsSeparator, sumNumbers, round } from '../../utilities'\nimport { Player } from '../Player'\nimport { Widget } from '../Widget'\nimport { Metric } from '../Metric';\n\nconst CaptainWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n\n    if (!stats) {\n        return (\n            <Widget title=\"Captains\" />\n        )\n    }\n\n    const captains = Object\n        .values(stats)\n        .map(position => {\n            return position\n                .map(player => ({\n                    player,\n                    data: player.data.filter(data => (data.multiplier || 0) > 1),\n                }))\n                .filter(player => player.data.length > 0)\n        })\n        .reduce((acc, curr) => acc.concat(curr), [])\n        .sort((a, b) => b.data.length - a.data.length)\n\n    return (\n        <Widget title=\"Captains\">\n            <ul className=\"widget__list\">\n                {captains.map(captain => {\n                    const sum = sumNumbers(captain.data.map(data => data.points || 0))\n\n                    return (\n                        <li className=\"widget__list__item\" key={captain.player.element.id}>\n                            <Player id={captain.player.element.id} />\n                            <span>{captain.data.length} ({thousandsSeparator(sum)} pts, {round(sum / captain.data.length)} <Metric metric=\"ppg\" />)</span>\n                        </li>\n                    )\n                })}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default CaptainWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { useMeanLabel, useMeanValue } from '../../hooks'\nimport { RootState } from '../../reducers'\nimport { Widget } from '../Widget'\nimport { round, thousandsSeparator } from '../../utilities'\nimport { SiteLink } from '../SiteLink'\n\nconst GameweekWidget: React.FC = () => {\n    const history = useSelector((state: RootState) => state.history.data)\n    const bootstrap = useSelector((state: RootState) => state.bootstrap.data)\n\n    const meanLabel = useMeanLabel()\n    const meanValue = useMeanValue()\n\n    if (!history || !bootstrap) {\n        return (\n            <Widget title=\"Gameweeks\" />\n        )\n    }\n\n    const differences = history.current.map((week, index) => week.points - bootstrap.events[index].average_entry_score)\n    const sortedRanks = [ ...history.current ].sort((a, b) => a.rank - b.rank)\n\n    const gws = [ ...history.current ].sort((a, b) => b.points - a.points)\n\n    const bestGW = gws[0]\n    const worstGW = gws[gws.length - 1]\n\n    return (\n        <Widget title=\"Gameweeks\">\n            <ul className=\"widget__list\">\n                <li className=\"widget__list__item\">\n                    <span>{meanLabel('Difference to GW Average')}</span>\n                    <span>{round(meanValue(differences))} pts</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Times Above GW Average</span>\n                    <span>{differences.filter(diff => diff >= 0).length}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Times Below GW Average</span>\n                    <span>{differences.filter(diff => diff < 0).length}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>{meanLabel('GW Rank')}</span>\n                    <span>{thousandsSeparator(Number(round(meanValue(history.current.map(week => week.rank)))))}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Best Gameweek</span>\n                    <span>\n                        {bestGW.points} pts\n                        {' '}\n                        (\n                            <SiteLink event={bestGW.event} />\n                        )\n                    </span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Worst Gameweek</span>\n                    <span>\n                        {worstGW.points} pts\n                        {' '}\n                        (\n                            <SiteLink event={worstGW.event} />\n                        )\n                    </span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Best GW Rank</span>\n                    <span>\n                        {thousandsSeparator(sortedRanks[0].rank)}\n                        {' '}\n                        (\n                            <SiteLink event={sortedRanks[0].event} />\n                        )\n                    </span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Worst GW Rank</span>\n                    <span>\n                        {thousandsSeparator(sortedRanks[sortedRanks.length - 1].rank)}\n                        {' '}\n                        (\n                            <SiteLink event={sortedRanks[sortedRanks.length - 1].event} />\n                        )\n                    </span>\n                </li>\n            </ul>\n        </Widget>\n    )\n}\n\nexport default GameweekWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { useMeanValue } from '../../hooks'\nimport { RootState } from '../../reducers'\nimport { getTotalPoints, thousandsSeparator, sumNumbers, round } from '../../utilities'\nimport { Widget } from '../Widget'\nimport { Metric } from '../Metric';\n\nconst PositionsWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n    const bootstrap = useSelector((state: RootState) => state.bootstrap.data)\n\n    const meanValue = useMeanValue()\n\n    if (!stats || !bootstrap) {\n        return (\n            <Widget title=\"Positions\" />\n        )\n    }\n\n    const positions: Record<string, number> = Object.entries(stats)\n        .reduce((acc, [ elementType, elements ]) => ({\n            ...acc,\n            [elementType]: elements.length,\n        }), {})\n\n    return (\n        <Widget title=\"Positions\">\n            <ul className=\"widget__list\">\n                <li className=\"widget__list__item\">\n                    <span>Total</span>\n                    <span>{Object.values(positions).reduce((acc, curr) => acc + curr, 0)}</span>\n                </li>\n                {Object.entries(positions).map(([ elementType, elements ]) => {\n                    const totalPoints = stats[Number(elementType)].map(player => getTotalPoints(player))\n\n                    return (\n                        <li className=\"widget__list__item\" key={elementType}>\n                            <span>{bootstrap.element_types.find(el => el.id === Number(elementType))?.plural_name}</span>\n                            <span>\n                                {elements}\n                                {' '}\n                                ({thousandsSeparator(sumNumbers(totalPoints))} pts, {round(meanValue(totalPoints))} <Metric metric=\"ppp\" />)\n                            </span>\n                        </li>\n                    )\n                })}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default PositionsWidget","import { createSlice, ThunkAction, Action } from '@reduxjs/toolkit'\nimport { History } from '../types'\nimport { finishLoading, startLoading } from './loading'\n\nconst entry = createSlice({\n    name: 'entry',\n    initialState: {\n        data: undefined,\n    },\n    reducers: {\n        fetchEntryStart(state) {\n            state.data = undefined\n        },\n        fetchEntrySuccess(state, action) {\n            state.data = action.payload\n        },\n    },\n})\n\nexport const { fetchEntryStart, fetchEntrySuccess } = entry.actions\n\nexport const fetchEntry = (id: number): ThunkAction<void, History, unknown, Action<string>> => async dispatch => {\n    dispatch(fetchEntryStart())\n    dispatch(startLoading())\n\n    const response = await fetch(`https://jsonp.afeld.me/?url=${encodeURIComponent(`https://fantasy.premierleague.com/api/entry/${id}/`)}`)\n\n    const data = await response.json()\n\n    dispatch(fetchEntrySuccess(data))\n    dispatch(finishLoading())\n}\n\nexport default entry.reducer","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { Widget } from '../Widget'\nimport { aggregateStats, getAllPlayers, thousandsSeparator } from '../../utilities'\nimport { sumNumbers } from '../../utilities/numbers';\nimport { SiteLink } from '../SiteLink'\n\nconst SeasonWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n    const chips = useSelector((state: RootState) => state.stats.chips)\n\n    const history = useSelector((state: RootState) => state.history.data)\n\n    if (!stats || !history || !chips) {\n        return (\n            <Widget title=\"Season\" />\n        )\n    }\n\n    const allPlayers = getAllPlayers(stats)\n\n    const reds = aggregateStats(allPlayers, 'red_cards').map(stat => stat['red_cards'] as number)\n    const yellows = aggregateStats(allPlayers, 'yellow_cards').map(stat => stat['yellow_cards'] as number)\n    const goals = aggregateStats(allPlayers, 'goals_scored').map(stat => stat['goals_scored'] as number)\n    const assists = aggregateStats(allPlayers, 'assists').map(stat => stat['assists'] as number)\n    const cleanSheets = aggregateStats(allPlayers, 'clean_sheets').map(stat => stat['clean_sheets'] as number)\n    const goalsConceded = aggregateStats(allPlayers, 'goals_conceded').map(stat => stat['goals_conceded'] as number)\n    const ownGoals = aggregateStats(allPlayers, 'own_goals').map(stat => stat['own_goals'] as number)\n    const saves = aggregateStats(allPlayers, 'saves').map(stat => stat['saves'] as number)\n    const minutes = aggregateStats(allPlayers, 'minutes').map(stat => stat['minutes'] as number)\n    const penaltiesMissed = aggregateStats(allPlayers, 'penalties_missed').map(stat => stat['penalties_missed'] as number)\n    const penaltiesSaved = aggregateStats(allPlayers, 'penalties_saved').map(stat => stat['penalties_saved'] as number)\n    const inDreamteam = aggregateStats(allPlayers, 'in_dreamteam').map(stat => stat['in_dreamteam'] as number)\n    const bps = aggregateStats(allPlayers, 'bps').map(stat => stat['bps'] as number)\n    const bonus = aggregateStats(allPlayers, 'bonus').map(stat => stat['bonus'] as number)\n\n    const totalTransfers = history.current.reduce((acc,event) => acc + event.event_transfers, 0)\n    const totalHits = history.current.reduce((acc,event) => acc + event.event_transfers_cost / 4, 0)\n    const totalBenched = history.current.reduce((acc,event) => acc + event.points_on_bench, 0)\n\n    const tc = allPlayers\n        .find(player => player.data.findIndex(data => data.multiplier === 3) !== -1)\n        ?.data\n        .find(data => data.multiplier === 3)\n\n    const bbWeek = Object.entries(chips).find(([ gw, chip ]) => chip === 'bboost')?.[0]\n\n    const bbPoints = bbWeek\n        ? sumNumbers(allPlayers\n            .filter(player => (player.data[Number(bbWeek) - 1].position || 0) > 11)\n            .map(player => player.data[Number(bbWeek) - 1].points || 0))\n        : null\n\n    return (\n        <Widget title=\"Season\">\n            <ul className=\"widget__list\">\n                <li className=\"widget__list__item\">\n                    <span>Total Transfers Made</span>\n                    <span>\n                        <SiteLink target=\"transfers\" label={`${totalTransfers}`} />\n                    </span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Hits Taken</span>\n                    <span>{totalHits} ({totalHits * -4} pts)</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Points on Bench</span>\n                    <span>{totalBenched} pts</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Red Cards</span>\n                    <span>{sumNumbers(reds)}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Yellow Cards</span>\n                    <span>{sumNumbers(yellows)}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Goals Scored</span>\n                    <span>{sumNumbers(goals)}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Goals Conceded</span>\n                    <span>{sumNumbers(goalsConceded)}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Assists</span>\n                    <span>{sumNumbers(assists)}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Clean Sheets</span>\n                    <span>{sumNumbers(cleanSheets)}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Own Goals</span>\n                    <span>{sumNumbers(ownGoals)}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Saves</span>\n                    <span>{sumNumbers(saves)}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Minutes Played</span>\n                    <span>{thousandsSeparator(sumNumbers(minutes))}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Penalties Missed</span>\n                    <span>{sumNumbers(penaltiesMissed)}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Penalties Saved</span>\n                    <span>{sumNumbers(penaltiesSaved)}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Times in Dreamteam</span>\n                    <span>{sumNumbers(inDreamteam)}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total BPS</span>\n                    <span>{thousandsSeparator(sumNumbers(bps))}</span>\n                </li>\n                <li className=\"widget__list__item\">\n                    <span>Total Bonus Points</span>\n                    <span>{thousandsSeparator(sumNumbers(bonus))}</span>\n                </li>\n                {tc !== undefined && (\n                    <li className=\"widget__list__item\">\n                        <span>Triple Captain Points Gained</span>\n                        <span>\n                            {(tc.points || 0) / 3} pts\n                            (\n                                <SiteLink event={tc.event.id} />\n                            )\n                        </span>\n                    </li>\n                )}\n                {bbPoints !== null && (\n                    <li className=\"widget__list__item\">\n                        <span>Bench Boost Points Gained</span>\n                        <span>\n                            {bbPoints} pts\n                            (\n                                <SiteLink event={Number(bbWeek)} />\n                            )\n                        </span>\n                    </li>\n                )}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default SeasonWidget","import React from 'react'\nimport { Team as TeamType } from '../../types'\nimport './Team.scss'\n\ntype Props = {\n    team: TeamType\n}\n\nconst Team: React.FC<Props> = (props: Props) => (\n    <div className=\"team\">\n        <img\n            src={`https://fantasy.premierleague.com/dist/img/shirts/special/shirt_${props.team.code}-66.png`}\n            alt={props.team.short_name}\n            className=\"player__shirt\"\n        />\n        <span className=\"team__name\">{props.team.name}</span>\n    </div>\n)\n\nexport default Team","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { Team } from '../Team'\nimport { Widget } from '../Widget'\nimport { getAllPlayers, getTotalPoints, round, sumNumbers } from '../../utilities'\nimport { Metric } from '../Metric'\nimport './TeamsWidget.scss'\n\nconst TeamsWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n    const bootstrap = useSelector((state: RootState) => state.bootstrap.data)\n\n    if (!stats || !bootstrap) {\n        return (\n            <Widget title=\"Teams\" />\n        )\n    }\n\n    const counts = Object.values(stats)\n        .reduce((acc: number[], curr) => [ ...acc, ...curr.map(el => el.element.team) ], [])\n        .reduce((acc: { [key: number]: number }, curr) => ({ ...acc, [curr]: (acc[Number(curr)] || 0) + 1 }), {})\n\n    const teams = [ ...bootstrap.teams ].sort((a, b) => (counts[b.id] || 0) - (counts[a.id] || 0))\n\n    const allPlayers = getAllPlayers(stats)\n\n    return (\n        <Widget title=\"Teams\">\n            <ul className=\"widget__list\">\n                {teams.map(team => {\n                    const players = allPlayers.filter(player => player.element.team === team.id)\n                    const points = sumNumbers(players.map(player => getTotalPoints(player)))\n\n                    const positions: Record<string, number> = bootstrap.element_types\n                        .reduce((acc, curr) => ({\n                            ...acc,\n                            [curr.id]: players.filter(player => player.element.element_type === curr.id).length,\n                        }), {})\n\n                    return (\n                        <li className=\"widget__list__item\" key={team.id}>\n                            <Team team={team} />\n                            <div>\n                                <div>\n                                    <b>{counts[team.id] || 0}</b>\n                                    {' '}\n                                    (\n                                        {points} pts, {players.length ? round(points / players.length) : 0}\n                                        {' '}\n                                        <Metric metric=\"ppp\" />\n                                    )\n                                </div>\n                                <div>\n                                    {Object.entries(positions).map(([ type, count ]) => (\n                                        <span className=\"teams-widget__position\" key={type}>\n                                            {count} {bootstrap.element_types.find(el => el.id === Number(type))?.plural_name_short}\n                                        </span>\n                                    ))}\n                                </div>\n                            </div>\n                        </li>\n                    )\n                })}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default TeamsWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { getAllPlayers, getNonBlankStreak, round } from '../../utilities'\nimport { Metric } from '../Metric'\nimport { Player } from '../Player'\nimport { SiteLink } from '../SiteLink'\nimport { Widget } from '../Widget'\n\nconst MAX_ITEMS = 10\n\nconst NonBlankStreakWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n\n    if (!stats) {\n        return (\n            <Widget title=\"Highest Non-Blank Streaks\" />\n        )\n    }\n\n    const allPlayers = getAllPlayers(stats)\n\n    const streakers = allPlayers.sort((a, b) => {\n        const aStreak = getNonBlankStreak(a)\n        const bStreak = getNonBlankStreak(b)\n\n        const aStreakLength = getNonBlankStreak(a)?.length || 0\n        const bStreakLength = getNonBlankStreak(b)?.length || 0\n\n        if (bStreakLength - aStreakLength === 0) {\n            return (bStreak?.points || 0) - (aStreak?.points || 0)\n        }\n\n        return bStreakLength - aStreakLength\n    }).slice(0, MAX_ITEMS)\n\n    return (\n        <Widget title=\"Highest Non-Blank Streaks\">\n            <ul className=\"widget__list\">\n                {streakers.map(streaker => {\n                    const streak = getNonBlankStreak(streaker)\n\n                    if (!streak) {\n                        return null\n                    }\n\n                    return (\n                        <li className=\"widget__list__item\" key={streaker.element.id}>\n                            <Player id={streaker.element.id} />\n                            <div>\n                                <div>\n                                    <SiteLink event={streak.start.id} />\n                                    {' – '}\n                                    <SiteLink event={streak.end.id} />\n                                </div>\n                                <div>\n                                    ({streak.length} GWs, {streak.points} pts, {round((streak.points || 0) / streak.length)} <Metric metric=\"ppg\" />)\n                                </div>\n                            </div>\n                        </li>\n                    )\n                })}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default NonBlankStreakWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { getAllPlayers, getSelectionStreak, round } from '../../utilities'\nimport { Metric } from '../Metric'\nimport { Player } from '../Player'\nimport { SiteLink } from '../SiteLink'\nimport { Widget } from '../Widget'\n\nconst MAX_ITEMS = 10\n\nconst SelectionStreakWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n\n    if (!stats) {\n        return (\n            <Widget title=\"Highest Selection Streaks\" />\n        )\n    }\n\n    const allPlayers = getAllPlayers(stats)\n\n    const streakers = allPlayers.sort((a, b) => {\n        const aStreak = getSelectionStreak(a)\n        const bStreak = getSelectionStreak(b)\n\n        const aStreakLength = getSelectionStreak(a)?.length || 0\n        const bStreakLength = getSelectionStreak(b)?.length || 0\n\n        if (bStreakLength - aStreakLength === 0) {\n            return (bStreak?.points || 0) - (aStreak?.points || 0)\n        }\n\n        return bStreakLength - aStreakLength\n    }).slice(0, MAX_ITEMS)\n\n    return (\n        <Widget title=\"Highest Selection Streaks\">\n            <ul className=\"widget__list\">\n                {streakers.map(streaker => {\n                    const streak = getSelectionStreak(streaker)\n\n                    if (!streak) {\n                        return null\n                    }\n\n                    return (\n                        <li className=\"widget__list__item\" key={streaker.element.id}>\n                            <Player id={streaker.element.id} />\n                            <div>\n                                <div>\n                                    <SiteLink event={streak.start.id} />\n                                    {' – '}\n                                    <SiteLink event={streak.end.id} />\n                                </div>\n                                <div>\n                                    (\n                                        {streak.length} GWs, {streak.points} pts, {round((streak.points || 0) / streak.length)} <Metric metric=\"ppg\" />\n                                    )\n                                </div>\n                            </div>\n                        </li>\n                    )\n                })}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default SelectionStreakWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { getAllPlayers, getStartStreak, round } from '../../utilities'\nimport { Metric } from '../Metric'\nimport { Player } from '../Player'\nimport { SiteLink } from '../SiteLink'\nimport { Widget } from '../Widget'\n\nconst MAX_ITEMS = 10\n\nconst StartStreakWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n\n    if (!stats) {\n        return (\n            <Widget title=\"Highest Start Streaks\" />\n        )\n    }\n\n    const allPlayers = getAllPlayers(stats)\n\n    const streakers = allPlayers.sort((a, b) => {\n        const aStreak = getStartStreak(a)\n        const bStreak = getStartStreak(b)\n\n        const aStreakLength = getStartStreak(a)?.length || 0\n        const bStreakLength = getStartStreak(b)?.length || 0\n\n        if (bStreakLength - aStreakLength === 0) {\n            return (bStreak?.points || 0) - (aStreak?.points || 0)\n        }\n\n        return bStreakLength - aStreakLength\n    }).slice(0, MAX_ITEMS)\n\n    return (\n        <Widget title=\"Highest Start Streaks\">\n            <ul className=\"widget__list\">\n                {streakers.map(streaker => {\n                    const streak = getStartStreak(streaker)\n\n                    if (!streak) {\n                        return null\n                    }\n\n                    return (\n                        <li className=\"widget__list__item\" key={streaker.element.id}>\n                            <Player id={streaker.element.id} />\n                            <div>\n                                <div>\n                                    <SiteLink event={streak.start.id} />\n                                    {' – '}\n                                    <SiteLink event={streak.end.id} />\n                                </div>\n                                <div>\n                                    (\n                                        {streak.length} GWs, {streak.points} pts, {round((streak.points || 0) / streak.length)} <Metric metric=\"ppg\" />\n                                    )\n                                </div>\n                            </div>\n                        </li>\n                    )\n                })}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default StartStreakWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { getAllPlayers, getBenchStreak } from '../../utilities'\nimport { Player } from '../Player'\nimport { SiteLink } from '../SiteLink'\nimport { Widget } from '../Widget'\n\nconst MAX_ITEMS = 10\n\nconst BenchStreakWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n\n    if (!stats) {\n        return (\n            <Widget title=\"Highest Bench Appearance Streaks\" />\n        )\n    }\n\n    const allPlayers = getAllPlayers(stats)\n\n    const streakers = allPlayers.sort((a, b) => (getBenchStreak(b)?.length || 0) - (getBenchStreak(a)?.length || 0)).slice(0, MAX_ITEMS)\n\n    return (\n        <Widget title=\"Highest Bench Appearance Streaks\">\n            <ul className=\"widget__list\">\n                {streakers.map(streaker => {\n                    const streak = getBenchStreak(streaker)\n\n                    if (!streak) {\n                        return null\n                    }\n\n                    return (\n                        <li className=\"widget__list__item\" key={streaker.element.id}>\n                            <Player id={streaker.element.id} />\n                            <div>\n                                <div>\n                                    <SiteLink event={streak.start.id} />\n                                    {' – '}\n                                    <SiteLink event={streak.end.id} />\n                                </div>\n                                <div>\n                                    ({streak.length} GWs)\n                                </div>\n                            </div>\n                        </li>\n                    )\n                })}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default BenchStreakWidget","import React from 'react'\n\nconst SwapIcon: React.FC = () => {\n    return (\n        <svg width=\"32\" height=\"20\" viewBox=\"0 0 32 20\" fill=\"#94968C\" className=\"swap-icon\">\n            <path fillRule=\"evenodd\" d=\"M53.6485838,32.0017628 L50.0028805,32.002243 L44.1795487,32.002243 L42.8449352,32.002243 C42.2448392,32.002243 41.6106577,32.2648846 41.1853096,32.6869358 C40.7782045,33.0941023 40.4723956,33.7595891 40.5007201,34.3468117 C40.5285646,34.9508394 40.7258761,35.5807952 41.1853096,36.0066875 C41.6447432,36.4287387 42.2069131,36.6913803 42.8449352,36.6913803 L46.4978397,36.6913803 L47.9851176,36.6913803 L45.4666347,39.209763 C43.6044167,41.0722619 41.7383581,42.9386019 39.8780605,44.7991802 C38.2707633,46.4067198 36.6673068,48.0104182 35.0585694,49.6193983 C34.2803649,50.3977202 33.4867979,51.1722009 32.7181949,51.9601258 L32.6845895,51.9937362 C32.2568411,52.4215492 32,53.0481439 32,53.6536121 C32,54.2317118 32.2530005,54.9140038 32.6845895,55.313488 C33.1305809,55.7206545 33.7157945,56.0265096 34.3442151,55.9981808 C34.9721555,55.9703321 35.5592895,55.7600268 36.0038406,55.313488 L37.931349,53.3856888 L42.5261642,48.7906607 L48.1147384,43.2007634 C49.1805089,42.1348321 50.2462794,41.0689008 51.3115699,40.0034497 L51.3115699,43.8239971 L51.3115699,45.1597723 C51.3115699,45.7599588 51.5741719,46.3937558 51.9961594,46.8196481 C52.4032645,47.2263345 53.068651,47.5321896 53.6557849,47.5038608 C54.2597216,47.4760121 54.8895823,47.279151 55.3154105,46.8196481 C55.7316371,46.3582247 56,45.7954898 56,45.1597723 L56,41.5058366 L56,35.6821067 L56,34.3468117 C56,34.0073461 55.9183869,33.6846859 55.781085,33.3893941 C55.6649064,33.1209907 55.5084013,32.8717932 55.3082093,32.6864556 C54.8617379,32.2792891 54.2770043,31.9739142 53.6485838,32.0017628 Z\" transform=\"rotate(45 71.042 -6.799)\"></path>\n        </svg>\n    )\n}\n\nexport default SwapIcon","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { getAllPlayers } from '../../utilities'\nimport { Player } from '../Player'\nimport { Widget } from '../Widget'\nimport { SwapIcon } from '../SwapIcon'\nimport { SiteLink } from '../SiteLink'\nimport './CaptainOpportunityWidget.scss'\n\nconst CaptainOpportunityWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n\n    const history = useSelector((state: RootState) => state.history.data)\n\n    if (!stats || !history) {\n        return (\n            <Widget title=\"Missed Captaincies\" />\n        )\n    }\n\n    const allPlayers = getAllPlayers(stats)\n    const weeks = history.current.length\n\n    const improvements = Array.from(Array(weeks).keys()).map((el, index) => ({\n        top: allPlayers.sort((a, b) => (b.data[index].rawPoints || 0) - (a.data[index].rawPoints || 0))[0],\n        captain: allPlayers.find(player => (player.data[index].multiplier || 0) > 0),\n    }))\n\n    return (\n        <Widget title=\"Missed Captaincies\">\n            <ul className=\"widget__list\">\n                {improvements.map((improvement, index) => {\n                    if (!improvement.captain || !improvement.top) {\n                        return null\n                    }\n\n                    const captainData = improvement.captain.data[index]\n                    const topData = improvement.top.data[index]\n\n                    if (captainData.rawPoints === topData.rawPoints) {\n                        return null\n                    }\n\n                    return (\n                        <li className=\"widget__list__item\" key={captainData.event.id}>\n                            <div>\n                                <Player id={improvement.captain.element.id} suffix=\"C\" />\n                                <Player id={improvement.top.element.id} />\n                            </div>\n                            <div className=\"captain-opportunity-widget__swap-info\">\n                                {(captainData.rawPoints || 0) * 2} <SwapIcon /> {(topData.rawPoints || 0) * 2}\n                                {' '}\n                                (\n                                    <SiteLink event={captainData.event.id} />\n                                )\n                            </div>\n                        </li>\n                    )\n                })}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default CaptainOpportunityWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { Widget } from '../Widget'\nimport { getAllPlayers, getTotalSelections } from '../../utilities'\nimport { Player } from '../Player'\n\nconst TeamsWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n\n    if (!stats) {\n        return (\n            <Widget title=\"Top Selections\" />\n        )\n    }\n\n    const elements = getAllPlayers(stats)\n        .sort((a, b) => getTotalSelections(b) - getTotalSelections(a))\n\n    return (\n        <Widget title=\"Top Selections\">\n            <ul className=\"widget__list\">\n                {elements.slice(0, 5).map(element => (\n                    <li className=\"widget__list__item\" key={element.element.id}>\n                        <Player id={element.element.id} />\n                        {getTotalSelections(element)}\n                    </li>\n                ))}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default TeamsWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { Widget } from '../Widget'\nimport { getAllPlayers, getTotalStarts } from '../../utilities'\nimport { Player } from '../Player'\n\nconst StarterWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n\n    if (!stats) {\n        return (\n            <Widget title=\"Top Starters\" />\n        )\n    }\n\n    const elements = getAllPlayers(stats)\n        .sort((a, b) => getTotalStarts(b) - getTotalStarts(a))\n\n    return (\n        <Widget title=\"Top Starters\">\n            <ul className=\"widget__list\">\n                {elements.slice(0, 5).map(element => (\n                    <li className=\"widget__list__item\" key={element.element.id}>\n                        <Player id={element.element.id} />\n                        {getTotalStarts(element)}\n                    </li>\n                ))}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default StarterWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { Widget } from '../Widget'\nimport { getAllPlayers, getTotalBenched } from '../../utilities'\nimport { Player } from '../Player'\n\nconst BenchWidget: React.FC = () => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n\n    if (!stats) {\n        return (\n            <Widget title=\"Top Bench Players\" />\n        )\n    }\n\n    const elements = getAllPlayers(stats)\n        .sort((a, b) => getTotalBenched(b) - getTotalBenched(a))\n\n    return (\n        <Widget title=\"Top Bench Players\">\n            <ul className=\"widget__list\">\n                {elements.slice(0, 5).map(element => (\n                    <li className=\"widget__list__item\" key={element.element.id}>\n                        <Player id={element.element.id} />\n                        {getTotalBenched(element)}\n                    </li>\n                ))}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default BenchWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../reducers'\nimport { Widget } from '../Widget'\nimport { getAllPlayers, getTotalBenched, getTotalSelections, getTotalStarts, round } from '../../utilities'\nimport { Player } from '../Player'\n\ntype Props = {\n    title: string\n    top?: boolean\n}\n\nconst DifferenceWidget: React.FC<Props> = (props: Props) => {\n    const stats = useSelector((state: RootState) => state.stats.data)\n\n    if (!stats) {\n        return (\n            <Widget title={props.title} />\n        )\n    }\n\n    const elements = getAllPlayers(stats)\n        .map(element => {\n            const selections = getTotalSelections(element)\n            const benched = getTotalBenched(element)\n            const starts = getTotalStarts(element)\n\n            return {\n                ...element,\n                benched,\n                benchedPercentage: benched / selections * 100,\n                starts,\n                startsPercentage: starts / selections * 100,\n            }\n        })\n\n    const topStarters = [ ...elements ].sort((a, b) => {\n        const percentageDiff = b.startsPercentage - a.startsPercentage\n        return percentageDiff === 0 ? b.starts - a.starts : percentageDiff\n    })\n\n    const topBenchwarmers = [ ...elements ].sort((a, b) => {\n        const percentageDiff = b.benchedPercentage - a.benchedPercentage\n        return percentageDiff === 0 ? b.benched - a.benched : percentageDiff\n    })\n\n    return (\n        <Widget title={props.title}>\n            <ul className=\"widget__list\">\n                {props.top && topStarters.slice(0, 5).map(element => (\n                    <li className=\"widget__list__item\" key={element.element.id}>\n                        <Player id={element.element.id} />\n                        <span>{round(element.startsPercentage)}% ({element.starts})</span>\n                    </li>\n                ))}\n                {!props.top && topBenchwarmers.slice(0, 5).map(element => (\n                    <li className=\"widget__list__item\" key={element.element.id}>\n                        <Player id={element.element.id} />\n                        <span>{round(element.benchedPercentage)}% ({element.benched})</span>\n                    </li>\n                ))}\n            </ul>\n        </Widget>\n    )\n}\n\nexport default DifferenceWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { AreaChart, Area, XAxis, YAxis, ResponsiveContainer, CartesianGrid, Tooltip } from 'recharts'\nimport { RootState } from '../../reducers'\nimport { Widget } from '../Widget'\nimport { getShortName, thousandsSeparator, thousandsShorthand } from '../../utilities'\n\nconst OverallRankWidget: React.FC = () => {\n    const history = useSelector((state: RootState) => state.history.data)\n    const bootstrap = useSelector((state: RootState) => state.bootstrap.data)\n\n    if (!history || !bootstrap) {\n        return (\n            <Widget title=\"Overall Rank Evolution\" />\n        )\n    }\n\n    let data = history.current.map(entry => {\n        const event = bootstrap.events.find(event => event.id === entry.event)\n\n        return {\n            name: `GW ${event ? getShortName(event) : entry.event}`,\n            value: entry.overall_rank,\n        }\n    })\n\n    const max = [ ...data ].sort((a, b) => b.value - a.value)[0].value * 1.05\n\n    data = [ ...data ].map(element => ({\n        ...element,\n        max,\n    }))\n\n    return (\n        <Widget title=\"Overall Rank Evolution\">\n            <div className=\"chart chart--reversed\">\n                <ResponsiveContainer height={300} width=\"100%\">\n                    <AreaChart data={data} margin={{ bottom: 45, left: 15, right: 15 }}>\n                        <Area type=\"monotone\" dataKey=\"max\" fill=\"#177B47\" fillOpacity=\"1\" />\n                        <Area type=\"monotone\" dataKey=\"value\" stroke=\"#177B47\" fill=\"#ffffff\" fillOpacity=\"1\" />\n                        <YAxis reversed={true} tickFormatter={value => thousandsShorthand(value)} domain={[1, max]} interval=\"preserveStartEnd\" tickCount={10} />\n                        <XAxis dataKey=\"name\" angle={-90} textAnchor=\"end\" interval=\"preserveStartEnd\" />\n                        <CartesianGrid stroke=\"rgba(192, 192, 192, 0.5)\" strokeDasharray=\"3 3\" />\n                        <Tooltip isAnimationActive={false} formatter={(value, name) => name === 'max' ? [undefined, undefined] : [ thousandsSeparator(Number(value)), 'Rank' ]} separator=\": \" />\n                    </AreaChart>\n                </ResponsiveContainer>\n            </div>\n        </Widget>\n    )\n}\n\nexport default OverallRankWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { AreaChart, Area, XAxis, YAxis, ResponsiveContainer, CartesianGrid, Tooltip } from 'recharts'\nimport { RootState } from '../../reducers'\nimport { Widget } from '../Widget'\nimport { getShortName } from '../../utilities'\n\nconst OverallRankWidget: React.FC = () => {\n    const history = useSelector((state: RootState) => state.history.data)\n    const bootstrap = useSelector((state: RootState) => state.bootstrap.data)\n\n    if (!history || !bootstrap) {\n        return (\n            <Widget title=\"Gameweek Points\" />\n        )\n    }\n\n    const data = history.current.map(entry => {\n        const event = bootstrap.events.find(event => event.id === entry.event)\n\n        return {\n            name: `GW ${event ? getShortName(event) : entry.event}`,\n            points: entry.points,\n            bench: entry.points_on_bench,\n        }\n    })\n\n    return (\n        <Widget title=\"Gameweek Points\">\n            <div className=\"chart\">\n                <ResponsiveContainer height={300} width=\"100%\">\n                    <AreaChart data={data} margin={{ bottom: 45, left: 15, right: 15 }}>\n                        <Area type=\"monotone\" dataKey=\"points\" stroke=\"#177B47\" fill=\"#177B47\" fillOpacity=\"1\" />\n                        <Area type=\"monotone\" dataKey=\"bench\" stroke=\"#00FF87\" fill=\"#00FF87\" fillOpacity=\"1\" />\n                        <YAxis interval=\"preserveStartEnd\" />\n                        <XAxis dataKey=\"name\" angle={-90} textAnchor=\"end\" interval=\"preserveStartEnd\" />\n                        <CartesianGrid stroke=\"rgba(192, 192, 192, 0.5)\" strokeDasharray=\"3 3\" />\n                        <Tooltip isAnimationActive={false} formatter={(value, name) => [ value, name.charAt(0).toUpperCase() + name.slice(1) ]} separator=\": \" />\n                    </AreaChart>\n                </ResponsiveContainer>\n            </div>\n        </Widget>\n    )\n}\n\nexport default OverallRankWidget","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { AreaChart, Area, XAxis, YAxis, ResponsiveContainer, CartesianGrid, Tooltip } from 'recharts'\nimport { RootState } from '../../reducers'\nimport { Widget } from '../Widget'\nimport { getShortName } from '../../utilities'\n\nconst ValueWidget: React.FC = () => {\n    const history = useSelector((state: RootState) => state.history.data)\n    const bootstrap = useSelector((state: RootState) => state.bootstrap.data)\n\n    if (!history || !bootstrap) {\n        return (\n            <Widget title=\"Team Value Evolution\" />\n        )\n    }\n\n    const data = history.current.map(entry => {\n        const event = bootstrap.events.find(event => event.id === entry.event)\n\n        return {\n            name: `GW ${event ? getShortName(event) : entry.event}`,\n            value: entry.value + entry.bank,\n        }\n    })\n\n    return (\n        <Widget title=\"Team Value Evolution\">\n            <div className=\"chart\">\n                <ResponsiveContainer height={300} width=\"100%\">\n                    <AreaChart data={data} margin={{ bottom: 45, left: 15, right: 15 }}>\n                        <Area type=\"monotone\" dataKey=\"value\" stroke=\"#177B47\" fill=\"#177B47\" fillOpacity=\"1\" />\n                        <YAxis tickFormatter={value => `£${value / 10}`} domain={[ 'auto', 'auto' ]} interval=\"preserveStartEnd\" />\n                        <XAxis dataKey=\"name\" angle={-90} textAnchor=\"end\" interval=\"preserveStartEnd\" />\n                        <CartesianGrid stroke=\"rgba(192, 192, 192, 0.5)\" strokeDasharray=\"3 3\" />\n                        <Tooltip isAnimationActive={false} formatter={(value, name) => [ `£${Number(value) / 10}`, name.charAt(0).toUpperCase() + name.slice(1) ]} separator=\": \" />\n                    </AreaChart>\n                </ResponsiveContainer>\n            </div>\n        </Widget>\n    )\n}\n\nexport default ValueWidget","import React, { useState, useEffect, useRef } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport classNames from 'classnames'\nimport Select, { ValueType } from 'react-select'\nimport queryString from 'query-string'\nimport { Bootstrap, StatData, Stats } from '../../types'\nimport { fetchBootstrap } from '../../reducers/bootstrap'\nimport { RootState } from '../../reducers'\nimport { Player } from '../Player'\nimport { Widget } from '../Widget'\nimport { Spinner } from '../Spinner'\nimport { getPastEvents, getTotalSelections, getTotalStarts, getTotalBenched, getChipAbbreviation, thousandsSeparator, getShortName, validateTeamId, getTotalPoints, round } from '../../utilities'\nimport { Modal } from '../Modal'\nimport { setId } from '../../reducers/settings'\nimport { buildData } from '../../reducers/stats'\nimport { Button } from '../Button'\nimport { fetchHistory } from '../../reducers/history'\nimport { HistoryWidget } from '../HistoryWidget'\nimport { TotsWidget } from '../TotsWidget'\nimport { PlayerStatsWidget } from '../PlayerStatsWidget'\nimport { FormationWidget } from '../FormationWidget'\nimport { CaptainWidget } from '../CaptainWidget'\nimport { GameweekWidget } from '../GameweekWidget'\nimport { PositionsWidget } from '../PositionsWidget'\nimport { fetchEntry } from '../../reducers/entry'\nimport { Metric } from '../Metric'\nimport { SeasonWidget } from '../SeasonWidget'\nimport { TeamsWidget } from '../TeamsWidget'\nimport { NonBlankStreakWidget } from '../NonBlankStreakWidget'\nimport { SelectionStreakWidget } from '../SelectionStreakWidget'\nimport { StartStreakWidget } from '../StartStreakWidget'\nimport { BenchStreakWidget } from '../BenchStreakWidget'\nimport { CaptainOpportunityWidget } from '../CaptainOpportunityWidget'\nimport { SelectionWidget } from '../SelectionWidget'\nimport { StarterWidget } from '../StarterWidget'\nimport { BenchWidget } from '../BenchWidget'\nimport { DifferenceWidget } from '../DifferenceWidget'\nimport { OverallRankWidget } from '../OverallRankWidget'\nimport { PointsWidget } from '../PointsWidget'\nimport { ValueWidget } from '../ValueWidget'\nimport './Dashboard.scss'\nimport { SiteLink } from '../SiteLink'\n\ntype OptionType = {\n    value: string\n    label: string\n}\n\ntype QueryString = {\n    team?: string\n}\n\nconst sortings: { [ key: string ]: (statData: StatData) => number } = {\n    points: getTotalPoints,\n    selection: getTotalSelections,\n    start: getTotalStarts,\n    bench: getTotalBenched,\n    alphabet: (statData: StatData): number => {\n        return statData.element.web_name.toLowerCase().charCodeAt(0) * -1\n    }\n}\n\nconst sortOptions = [\n    { value: 'points', label: 'Total Points' },\n    { value: 'selection', label: 'Most Selected' },\n    { value: 'start', label: 'Most Started' },\n    { value: 'bench', label: 'Most Benched' },\n    { value: 'alphabet', label: 'Alphabetically' },\n]\n\nconst renderPlayerList = (stats: Stats, bootstrap: Bootstrap, sort: OptionType): JSX.Element[] => Object.entries(stats).map(([ elementType, statData ]) => (\n    <div key={elementType}>\n        <li className=\"dashboard__category\">\n            <span>{bootstrap?.element_types.find(el => el.id === Number(elementType))?.plural_name_short}</span>\n            <span>{statData.length}</span>\n        </li>\n        {statData\n            .filter(element => element.data.filter(pick => pick.multiplier !== null).length)\n            .sort((a, b) => sortings[sort.value](b) - sortings[sort.value](a))\n            .map(element => (\n                <li key={element.element.id} className=\"dashboard__item\">\n                    <div className=\"dashboard__player\">\n                        <Player id={element.element.id} />\n                    </div>\n                    <div className=\"dashboard__stats\">\n                        {element.data.map(item => (\n                            <span\n                                key={item.event.id}\n                                className={classNames('dashboard__stat', {\n                                    'dashboard__stat--benched': item.multiplier === 0,\n                                    'dashboard__stat--triple': item.multiplier === 3,\n                                    'dashboard__stat--started': item.multiplier,\n                                })}\n                            />\n                        ))}\n                    </div>\n                    <div className=\"dashboard__totals\">\n                        <span className=\"dashboard__stat\">\n                            {getTotalSelections(element)} ({round(getTotalSelections(element) / element.data.length * 100)}%)\n                        </span>\n                        <span className=\"dashboard__stat\">\n                            {getTotalStarts(element)} ({round(getTotalStarts(element) / element.data.length * 100)}%)\n                        </span>\n                        <span className=\"dashboard__stat\">\n                            {getTotalBenched(element)} ({round(getTotalBenched(element) / element.data.length * 100)}%)\n                        </span>\n                        <span className=\"dashboard__stat\">\n                            <span>\n                                {getTotalPoints(element)} ({getTotalStarts(element) > 0 ? round(getTotalPoints(element) / getTotalStarts(element)) : 0} <Metric metric=\"ppg\" />)\n                            </span>\n                        </span>\n                    </div>\n                </li>\n            ))\n        }\n    </div>\n))\n\nconst Dashboard: React.FC = () => {\n    const [ isModalOpen, setIsModalOpen ] = useState(true)\n    const [ sort, setSort ] = useState<ValueType<OptionType>>(sortOptions[0])\n\n    const isLoading = useSelector((state: RootState) => state.loading > 0)\n\n    const bootstrap = useSelector((state: RootState) => state.bootstrap.data)\n\n    const stats = useSelector((state: RootState) => state.stats.data)\n    const chips = useSelector((state: RootState) => state.stats.chips)\n\n    const id = useSelector((state: RootState) => state.settings.id)\n\n    const entry = useSelector((state: RootState) => state.entry.data)\n\n    const dashboardRef = useRef<HTMLDivElement>(null)\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(fetchBootstrap())\n\n        const query: QueryString = queryString.parse(window.location.hash)\n\n        if (query.team && validateTeamId(query.team)) {\n            dispatch(setId(query.team))\n        }\n    }, [ dispatch ])\n\n    useEffect(() => {\n        setTimeout(() => {\n            if (dashboardRef && dashboardRef.current) {\n                dashboardRef.current.scrollTo(dashboardRef.current.scrollWidth, 0)\n            }\n        }, 1)\n    }, [ stats ])\n\n    useEffect(() => {\n        setIsModalOpen(!id)\n\n        if (bootstrap && id) {\n            dispatch(buildData(bootstrap, id))\n            dispatch(fetchHistory(id))\n            dispatch(fetchEntry(id))\n\n            window.location.hash = queryString.stringify({ team: id })\n        }\n    }, [ id, dispatch, bootstrap ])\n\n    return (\n        <div className=\"app\">\n            {isModalOpen && (\n                <Modal onClose={() => setIsModalOpen(false)} />\n            )}\n            <div className={classNames('app__loading', {\n                'app__loading--hidden': !isLoading,\n            })}>\n                <Spinner />\n            </div>\n            <div className=\"app__content\">\n                {entry && (\n                    <header className=\"dashboard__entry\">\n                        <Widget>\n                            <h1 className=\"dashboard__title\">\n                                <SiteLink label={entry.name} />\n                                <div className=\"small\">{entry.summary_overall_points} pts — Rank {thousandsSeparator(entry.summary_overall_rank)}</div>\n                            </h1>\n                            {id !== undefined && (\n                                <Button\n                                    onClick={() => setIsModalOpen(true)}\n                                    label=\"Change Team\"\n                                />\n                            )}\n                        </Widget>\n                    </header>\n                )}\n                <div className=\"dashboard__widgets dashboard__widgets--split\">\n                    <TotsWidget />\n                    <PlayerStatsWidget />\n                </div>\n                <div className=\"app__meta\">\n                    <label className=\"app__meta__label\">\n                        Sort by\n                    </label>\n                    <Select\n                        options={sortOptions}\n                        value={sort}\n                        onChange={option => setSort(option)}\n                        styles={{\n                            container: (provided) => ({ ...provided, width: '100%' }),\n                            menu: (provided) => ({ ...provided, zIndex: 20 })\n                        }}\n                    />\n                    <div className=\"app__legend\">\n                        <div className=\"app__color\">\n                            <div className=\"app__color__indicator app__color__indicator--started\"></div>\n                            Started\n                        </div>\n                        <div className=\"app__color\">\n                            <div className=\"app__color__indicator app__color__indicator--benched\"></div>\n                            Benched\n                        </div>\n                        <div className=\"app__color\">\n                            <div className=\"app__color__indicator app__color__indicator--triple\"></div>\n                            TC\n                        </div>\n                        <div className=\"app__color\">\n                            <div className=\"app__color__indicator\"></div>\n                            Not Selected\n                        </div>\n                    </div>\n                </div>\n                <div className={classNames('dashboard', {\n                    'dashboard--cloaked': !id,\n                })}>\n                    <div className=\"dashboard__container\" ref={dashboardRef}>\n                        <header className=\"dashboard__header\">\n                            <span className=\"dashboard__heading\">\n                                Player\n                            </span>\n                            {bootstrap?.events && getPastEvents(bootstrap.events).filter(event => event.top_element_info.points > 0).map(event => (\n                                <span className=\"dashboard__stat\" key={event.id}>\n                                    {getShortName(event)}\n                                    {chips && chips[event.id] && (\n                                        <div>{getChipAbbreviation(chips[event.id])}</div>\n                                    )}\n                                </span>\n                            ))}\n                            <div className=\"dashboard__totals\">\n                                <span className=\"dashboard__stat\">\n                                    Selected\n                                </span>\n                                <span className=\"dashboard__stat\">\n                                    Starting\n                                </span>\n                                <span className=\"dashboard__stat\">\n                                    Benched\n                                </span>\n                                <span className=\"dashboard__stat\">\n                                    Points\n                                </span>\n                            </div>\n                        </header>\n                        <ul className=\"dashboard__list\">\n                            {stats && bootstrap && renderPlayerList(stats, bootstrap, sort as OptionType)}\n                        </ul>\n                    </div>\n                </div>\n                <div className=\"dashboard__widgets\">\n                    <SelectionWidget />\n                    <StarterWidget />\n                    <BenchWidget />\n                    <DifferenceWidget title=\"Most Consistent Starters\" top />\n                    <DifferenceWidget title=\"Most Consistent Bench Players\" />\n                    <TeamsWidget />\n                    <PositionsWidget />\n                    <HistoryWidget />\n                    <FormationWidget />\n                    <CaptainWidget />\n                    <GameweekWidget />\n                    <SeasonWidget />\n                    <NonBlankStreakWidget />\n                    <SelectionStreakWidget />\n                    <StartStreakWidget />\n                    <BenchStreakWidget />\n                    <CaptainOpportunityWidget />\n                </div>\n                <div className=\"dashboard__graphs\">\n                    <OverallRankWidget />\n                    <PointsWidget />\n                    <ValueWidget />\n                </div>\n                <div className=\"app__legal\">\n                    <p>FPL Stats uses data from the official Premier League Fantasy API. This site is not affiliated with the Premier League.</p>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Dashboard","import { combineReducers } from 'redux'\nimport bootstrap from './bootstrap'\nimport stats from './stats'\nimport settings from './settings'\nimport entry from './entry'\nimport { Bootstrap, Stats, History, Entry } from '../types'\nimport history from './history'\nimport loading from './loading'\n\nexport type RootState = {\n    loading: number\n    bootstrap: {\n        data: Bootstrap | undefined\n    }\n    stats: {\n        data: Stats | undefined\n        chips: {\n            [key: number]: string\n        } | undefined\n    }\n    settings: {\n        id: number | undefined\n        meanStrategy: 'average' | 'median'\n    }\n    history: {\n        data: History | undefined\n    }\n    entry: {\n        data: Entry | undefined\n    }\n}\n\nexport default combineReducers({\n    loading,\n    bootstrap,\n    stats,\n    settings,\n    history,\n    entry,\n})","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport * as serviceWorker from './serviceWorker'\nimport { Dashboard } from './components/Dashboard'\nimport configureAppStore from './store'\nimport './index.scss'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={configureAppStore()}>\n      <Dashboard />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\nserviceWorker.unregister()\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit'\nimport rootReducer from './reducers'\n\nexport default function configureAppStore() {\n    const store = configureStore({\n        reducer: rootReducer,\n        middleware: [ ...getDefaultMiddleware() ],\n    })\n\n    return store\n}"],"sourceRoot":""}